<div class="auth-container">
    <div class="auth-card">
        <div class="header-row">
            <button class="back-btn" (click)="goBack()">
                <span class="material-icons">arrow_back</span>
            </button>
            <h2 class="auth-title" style="margin: 0; flex: 1;">My Profile</h2>
        </div>

        <div class="tabs">
            <button class="tab-btn" [class.active]="activeTab === 'details'" (click)="switchTab('details')">
                Details
            </button>
            <button class="tab-btn" [class.active]="activeTab === 'security'" (click)="switchTab('security')">
                Security
            </button>
        </div>

        <div class="status-message success" *ngIf="message">{{ message }}</div>
        <div class="status-message error" *ngIf="error">{{ error }}</div>

        <!-- Details Tab -->
        <form *ngIf="activeTab === 'details'" [formGroup]="profileForm" (ngSubmit)="onProfileSubmit()"
            class="auth-form">
            <div class="form-group">
                <label class="form-label">Full Name</label>
                <input type="text" class="form-input" formControlName="name">
            </div>
            <div class="form-group">
                <label class="form-label">Email Address</label>
                <input type="email" class="form-input" formControlName="email">
            </div>
            <button type="submit" class="auth-button" [disabled]="profileForm.invalid || profileForm.pristine">
                Save Changes
            </button>
        </form>

        <!-- Security Tab -->
        <form *ngIf="activeTab === 'security'" [formGroup]="passwordForm" (ngSubmit)="onPasswordSubmit()"
            class="auth-form">
            <div class="form-group">
                <label class="form-label">Current Password</label>
                <input type="password" class="form-input" formControlName="currentPassword">
            </div>
            <div class="form-group">
                <label class="form-label">New Password</label>
                <input type="password" class="form-input" formControlName="newPassword">
            </div>
            <div class="form-group">
                <label class="form-label">Confirm New Password</label>
                <input type="password" class="form-input" formControlName="confirmPassword">
                <div *ngIf="passwordForm.errors?.['mismatch'] && passwordForm.get('confirmPassword')?.touched"
                    class="user-error">
                    Passwords do not match.
                </div>
            </div>
            <button type="submit" class="auth-button" [disabled]="passwordForm.invalid">
                Update Password
            </button>
        </form>

    </div>
</div>